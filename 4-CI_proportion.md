
# the binomial distribution


```python
import numpy as np
```


```python
coins = np.random.binomial(10, .5, 10000)
```


```python
np.mean(coins)
```


    5.0177


```python
coins
```


    array([3, 6, 7, ..., 6, 4, 6])


```python
import matplotlib.pyplot as plt
%matplotlib inline
```


```python
plt.hist(coins, normed=True);
```

![png](output_6_1.png)

```python
proba = np.sum(coins == 7) / 10000
print(proba)
```

    0.1179

```python
coins == 7
```


    array([False, False,  True, ..., False, False, False])


```python
from scipy.stats import binom
```


```python
n = 10
p = .5
mean, var = binom.stats(n, p)
```


```python
x = np.arange(binom.ppf(.001, n, p),
             binom.ppf(.999, n, p))
plt.plot(x, binom.pmf(x, n, p), 'bo', ms=8)
plt.vlines(x, 0, binom.pmf(x, n, p), colors='b', lw=5, alpha=.5);
```


![png](output_11_0.png)

```python
patients = np.random.binomial(30, .05, 10000)
patients
```


    array([4, 3, 0, ..., 0, 3, 2])


```python
proba_patients = np.sum(patients == 10)
print(proba_patients)
```

    0

```python
plt.hist(patients, bins=20);
```


![png](output_14_0.png)

```python
democrates = np.random.binomial(600, .4, 10000)
```


```python
democrates
```


    array([246, 248, 221, ..., 222, 232, 241])


```python
proba_democrates = np.sum(democrates == .45*600) / 10000
print(proba_democrates)
```

    0.001

```python
democrates
```


    array([246, 248, 221, ..., 222, 232, 241])


```python
plt.hist(democrates, normed=True, bins=100);
```

![png](output_19_1.png)

```python
n = 600
p = 0.4

x = np.arange(binom.ppf(.001, n, p),
             binom.ppf(.999, n, p))
plt.plot(x, binom.pmf(x, n, p), 'bo', ms=8);
#plt.vlines(x, 0, binom.pmf(x, n, p), colors='b', lw=5, alpha=.5);
```


![png](output_20_0.png)


# example of CI with basketball


```python
basket = np.random.binomial(20, .85, 10000)
```


```python
basket
```


    array([17, 17, 17, ..., 13, 15, 20])


```python
np.percentile(basket, [2.5, 97.5])
```


    array([14., 20.])


```python
plt.hist(basket, bins=10);
```



```python
from scipy import stats
conf_int = stats.norm.interval(.95, np.mean(basket), np.std(basket)) # method = normal !!!
conf_int
```


    (13.88282896967227, 20.09937103032773)


```python
from statsmodels.stats import proportion
conf_int = proportion.proportion_confint(17, 20, method='binom_test')   #count=number of successe,
                                                                        #nobs =total number of trials
conf_int
```


    (0.6277974742913475, 0.9578305921142214)


```python
.627*20
```


    12.54


```python
voters = np.random.binomial(100, .33, 10000)
```


```python
np.mean(voters)
```


    32.9601


```python
plt.hist(voters);
```


![png](output_31_0.png)

```python
np.percentile(voters, [2.5, 97.5])
```


    array([24., 42.])


```python
conf_int_vot = proportion.proportion_confint(33, 100, method='binom_test')
conf_int_vot
```


    (0.24422179825109844, 0.4297484580574604)


```python
bowl = np.random.binomial(15, .25, 10000)
```


```python
frac_red_bowl = bowl/15
```


```python
plt.hist(frac_red_bowl, normed=True);
```

    c:\program files\python37\lib\site-packages\matplotlib\axes\_axes.py:6521: MatplotlibDeprecationWarning: 
    The 'normed' kwarg was deprecated in Matplotlib 2.1 and will be removed in 3.1. Use 'density' instead.
      alternative="'density'", removal="3.1")

![png](output_36_1.png)

```python
np.percentile(frac_red_bowl, [2.5, 97.5])
```


    array([0.06666667, 0.46666667])


```python
count = .25*15
conf_int_bowl = proportion.proportion_confint(count, 15, method='binom_test')
conf_int_bowl
```


    (0.0568468675901866, 0.465722221350045)


```python
A = np.random.binomial(15, .25, 100)
A
```


    array([3, 5, 3, 1, 4, 4, 4, 3, 1, 3, 4, 3, 2, 4, 3, 3, 4, 6, 7, 8, 5, 2,
           2, 3, 2, 6, 5, 6, 5, 0, 4, 3, 4, 6, 6, 2, 1, 4, 4, 5, 1, 2, 5, 5,
           4, 1, 3, 3, 1, 1, 3, 3, 5, 3, 5, 3, 2, 6, 3, 4, 2, 4, 3, 2, 3, 2,
           5, 7, 1, 2, 3, 5, 5, 7, 2, 6, 4, 2, 6, 2, 6, 4, 3, 4, 6, 3, 3, 5,
           4, 9, 5, 2, 2, 6, 3, 4, 3, 3, 6, 3])


```python
ci_A = [proportion.proportion_confint(i, 15, method='binom_test') for i in A]
```


```python
ci_A
```


    [(0.056846867590246805, 0.4657222213498857),
     (0.1416639716421532, 0.6032860217311591),
     (0.056846867590246805, 0.4657222213498857),
     (0.003413712946570998, 0.3020686313190762),
     (0.0966583339917372, 0.5342777848720284),
     (0.0966583339917372, 0.5342777848720284),
     (0.0966583339917372, 0.5342777848720284),
     (0.056846867590246805, 0.4657222213498857),
     (0.003413712946570998, 0.3020686313190762),
     (0.056846867590246805, 0.4657222213498857),
     (0.0966583339917372, 0.5342777848720284),
     (0.056846867590246805, 0.4657222213498857),
     (0.024225732468536626, 0.3967139842509865),
     (0.0966583339917372, 0.5342777848720284),
     (0.056846867590246805, 0.4657222213498857),
     (0.056846867590246805, 0.4657222213498857),
     (0.0966583339917372, 0.5342777848720284),
     (0.1908646861741716, 0.6676817724163027),
     (0.22221811260678587, 0.7060878588515205),
     (0.2939121411484795, 0.7777818873932145),
     (0.1416639716421532, 0.6032860217311591),
     (0.024225732468536626, 0.3967139842509865),
     (0.024225732468536626, 0.3967139842509865),
     (0.056846867590246805, 0.4657222213498857),
     (0.024225732468536626, 0.3967139842509865),
     (0.1908646861741716, 0.6676817724163027),
     (0.1416639716421532, 0.6032860217311591),
     (0.1908646861741716, 0.6676817724163027),
     (0.1416639716421532, 0.6032860217311591),
     (0, 0.2222181175436198),
     (0.0966583339917372, 0.5342777848720284),
     (0.056846867590246805, 0.4657222213498857),
     (0.0966583339917372, 0.5342777848720284),
     (0.1908646861741716, 0.6676817724163027),
     (0.1908646861741716, 0.6676817724163027),
     (0.024225732468536626, 0.3967139842509865),
     (0.003413712946570998, 0.3020686313190762),
     (0.0966583339917372, 0.5342777848720284),
     (0.0966583339917372, 0.5342777848720284),
     (0.1416639716421532, 0.6032860217311591),
     (0.003413712946570998, 0.3020686313190762),
     (0.024225732468536626, 0.3967139842509865),
     (0.1416639716421532, 0.6032860217311591),
     (0.1416639716421532, 0.6032860217311591),
     (0.0966583339917372, 0.5342777848720284),
     (0.003413712946570998, 0.3020686313190762),
     (0.056846867590246805, 0.4657222213498857),
     (0.056846867590246805, 0.4657222213498857),
     (0.003413712946570998, 0.3020686313190762),
     (0.003413712946570998, 0.3020686313190762),
     (0.056846867590246805, 0.4657222213498857),
     (0.056846867590246805, 0.4657222213498857),
     (0.1416639716421532, 0.6032860217311591),
     (0.056846867590246805, 0.4657222213498857),
     (0.1416639716421532, 0.6032860217311591),
     (0.056846867590246805, 0.4657222213498857),
     (0.024225732468536626, 0.3967139842509865),
     (0.1908646861741716, 0.6676817724163027),
     (0.056846867590246805, 0.4657222213498857),
     (0.0966583339917372, 0.5342777848720284),
     (0.024225732468536626, 0.3967139842509865),
     (0.0966583339917372, 0.5342777848720284),
     (0.056846867590246805, 0.4657222213498857),
     (0.024225732468536626, 0.3967139842509865),
     (0.056846867590246805, 0.4657222213498857),
     (0.024225732468536626, 0.3967139842509865),
     (0.1416639716421532, 0.6032860217311591),
     (0.22221811260678587, 0.7060878588515205),
     (0.003413712946570998, 0.3020686313190762),
     (0.024225732468536626, 0.3967139842509865),
     (0.056846867590246805, 0.4657222213498857),
     (0.1416639716421532, 0.6032860217311591),
     (0.1416639716421532, 0.6032860217311591),
     (0.22221811260678587, 0.7060878588515205),
     (0.024225732468536626, 0.3967139842509865),
     (0.1908646861741716, 0.6676817724163027),
     (0.0966583339917372, 0.5342777848720284),
     (0.024225732468536626, 0.3967139842509865),
     (0.1908646861741716, 0.6676817724163027),
     (0.024225732468536626, 0.3967139842509865),
     (0.1908646861741716, 0.6676817724163027),
     (0.0966583339917372, 0.5342777848720284),
     (0.056846867590246805, 0.4657222213498857),
     (0.0966583339917372, 0.5342777848720284),
     (0.1908646861741716, 0.6676817724163027),
     (0.056846867590246805, 0.4657222213498857),
     (0.056846867590246805, 0.4657222213498857),
     (0.1416639716421532, 0.6032860217311591),
     (0.0966583339917372, 0.5342777848720284),
     (0.3323182275836973, 0.8091353138258284),
     (0.1416639716421532, 0.6032860217311591),
     (0.024225732468536626, 0.3967139842509865),
     (0.024225732468536626, 0.3967139842509865),
     (0.1908646861741716, 0.6676817724163027),
     (0.056846867590246805, 0.4657222213498857),
     (0.0966583339917372, 0.5342777848720284),
     (0.056846867590246805, 0.4657222213498857),
     (0.056846867590246805, 0.4657222213498857),
     (0.1908646861741716, 0.6676817724163027),
     (0.056846867590246805, 0.4657222213498857)]


```python
plt.figure(figsize=(12,6))
plt.plot(A/15, 'b+', ci_A)
plt.axhline(.25, )
```


![png](output_42_1.png)


the orange or blue limit of the confidence intervales computed for each and every sample cross the theoritical mean value (0.25) exactely 5 times out of 100 samples
